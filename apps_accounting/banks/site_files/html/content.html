<div class="form">
    <div id="bankAddModal">
        <fieldset>
            <legend> ##word.bank_statement## </legend>
            <div class="row">
                <div class="col9">
                    <div class="row">
                        <i-control ng-disabled="disabledCode" class="col2" label="##word.banks_code##"
                            ng-model="bank.code"></i-control>

                        <i-control v="r" class="col4" label="##word.banks_name##" ng-model="bank.name"></i-control>

                        <i-control class="col4" label="##word.banks_bank_iban_number##" ng-model="bank.iban_number">
                        </i-control>

                        <i-checkbox class="col2" label="##word.active##" ng-model="bank.active"></i-checkbox>

                    </div>

                    <div class="row">

                        <fieldset>
                            <legend> ##word.branches## </legend>
                            <i-checkbox class="col3" label="##word.all_branches##" ng-model="bank.all_branches">
                            </i-checkbox>

                            <div class="row">
                                <div class="col6" ng-repeat="info in bank.branches_list">
                                    <i-list class="col4" ng-hide="bank.all_branches==true" label="##word.branch##"
                                        ng-model="info.branch" primary="name_ar" ng-search="_search.$bank_branch"
                                        items="companyBranchesList" display="name_ar"></i-list>

                                    <div class="col2" ng-hide="bank.all_branches==true">
                                        <br><br>
                                        <i-button type="add default" ng-click="bank.branches_list.push({})">
                                        </i-button>
                                        <i-button type="delete default"
                                            ng-click=" bank.branches_list.length === 1 || bank.branches_list.splice($index,1) ">
                                        </i-button>
                                    </div>
                                </div>

                            </div>

                        </fieldset>


                    </div>

                    <div class="row">
                        <i-list class="col3" label="##word.gl_account##" ng-model="bank.gl_accounts"
                            items="guideAccountList" display="name_ar" ng-search="_search.$bank_gl_account"></i-list>

                        <i-list v="r" class="col3" label="##word.currency##" ng-model="bank.currency"
                            items="currenciesList" display="name_ar" ng-search="_search.$bank_currency"></i-list>

                    </div>

                    <div class="row">

                        <i-list class="col4" label="##word.bank_expenses_account##"
                            ng-model="bank.bank_expenses_account" ng-search="_search.$bank_expenses_account"
                            items="guideAccountList" display="name_ar"></i-list>

                        <i-list class="col4" label="##word.checks_under_collection_account##"
                            ng-model="bank.checks_under_collection_account" ng-search="_search.$checks_under_collection"
                            items="guideAccountList" display="name_ar"></i-list>

                        <i-list class="col4" label="##word.checks_under_payment_account##"
                            ng-model="bank.checks_under_payment_account"
                            ng-search="_search.$checks_under_payment_account" items="guideAccountList"
                            display="name_ar"></i-list>
                    </div>

                </div>

                <div class="col3">
                    <i-image category="banks" ng-model="bank.image_url"></i-image>
                </div>

                <div class="row">

                    <i-control class="col3" label="##word.credit_card_commetion##"
                        ng-model="bank.credit_card_commetion"></i-control>

                    <i-control class="col3" label="##word.max_creditcard_limit##" ng-model="bank.max_creditcard_limit">
                    </i-control>

                    <i-control class="col3" label="##word.master_card_commetion##"
                        ng-model="bank.master_card_commetion"></i-control>

                    <i-control class="col3" label="##word.max_limit_mastercard##" ng-model="bank.max_limit_mastercard">
                    </i-control>
                </div>


                <div class="row">
                    <i-control class="col4" label="##word.network_commetion##" ng-model="bank.network_commetion">
                    </i-control>

                    <i-control class="col4" label="##word.max_limit_network##" ng-model="bank.max_limit_network">
                    </i-control>

                </div>

            </div>

        </fieldset>

        <fieldset>
            <legend>
                ##word.bank_information##
            </legend>

            <div class="row">
                <i-control class="col6" label="##word.bank_address##" ng-model="bank.bank_address"></i-control>

                <i-control class="col6" label="##word.charge##" ng-model="bank.charge"></i-control>
            </div>

            <div class="row">
                <i-control class="col4" label="##word.phone##" ng-model="bank.phone"></i-control>

                <i-control class="col4" label="##word.fax##" ng-model="bank.fax"></i-control>

            </div>
        </fieldset>

        <fieldset style="max-width:100%;">
            <legend>
                <i-button type="add default"
                    ng-click="bank.opening_balances.unshift({ debit_value: 0,  credit_value: 0})"></i-button>

                ##word.opening_balances##

            </legend>
            <div class="row">
                <table class="table grid">
                    <tr>
                        <th> ##word.account_number## </th>
                        <th> ##word.currency_code## </th>
                        <th> ##word.currency_name## </th>
                        <th> ##word.exchange_rate## </th>
                        <th> ##word.debit## </th>
                        <th> ##word.credit## </th>
                        <th> ##word.actions## </th>
                    </tr>

                    <tr ng-repeat="balance in bank.opening_balances">

                        <td class="w200">
                            <i-list items="guideAccountList" ng-search="_search.$balance_accounts" display="name_ar"
                                space="-" display2="code" ng-model="balance.account_name"
                                ng-change="getCurrenciesList(balance)">
                            </i-list>
                        </td>

                        <td class="w200">
                            <br>
                            <p class="text-center blue bold"> {{balance.currency.code}} </p>
                        </td>

                        <td class="w200">
                            <br>
                            <p class="text-center blue bold"> {{balance.currency.name_ar}} </p>
                        </td>

                        <td class="w200">
                            <i-control type="number" ng-model="balance.currency.exchange_price"></i-control>
                        </td>

                        <td class="w200">
                            <i-control type="number" ng-model="balance.debit_value" ng-change="balance.credit_value = 0"
                                ng-keydown="getItem($event)"></i-control>
                        </td>

                        <td class="w200">
                            <i-control type="number" ng-model="balance.credit_value" ng-change="balance.debit_value = 0"
                                ng-keydown="getItem($event)"></i-control>
                        </td>

                        <td class="w200">
                            <i-button type="delete default"
                                ng-click="bank.opening_balances.length ===1 || bank.opening_balances.splice($index,1)">
                            </i-button>
                        </td>

                    </tr>
                </table>
            </div>
        </fieldset>
    </div>
</div>