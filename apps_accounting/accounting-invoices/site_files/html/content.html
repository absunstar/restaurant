<div class="form">
    <div id="accountInvoicesAddModal">
        <fieldset>
            <legend> ##word.account_invoices_informations## </legend>
            <div class="row">
                <div class="col9">

                    <div class="row">
                        <i-date2 class="col4" ng-model="account_invoices.date" label="##word.date##"></i-date2>

                        <div class="col3"></div>

                        <i-control class="col3 r_indigo" disabled label="##word.shift##" ng-model="shift.code">
                        </i-control>

                        <i-checkbox class="col2" label="##word.active##" ng-model="account_invoices.active">
                        </i-checkbox>
                    </div>

                    <div class="row">
                        <div class="row">
                            <i-list help-id="" ng-search="_search.$source_type_search" class="col4"
                                ng-change="orderInvoicesTypeList = [] ; account_invoices.current_book_list = []; getOrderTypeSetting();getTransactionType(account_invoices.source_type)"
                                label="##word.source_type##" ng-model="account_invoices.source_type"
                                items="sourceTypeList" display="##session.lang##"></i-list>

                            <i-list help-id="" ng-show="account_invoices.source_type.id == 3"
                                ng-change="orderInvoicesTypeList = [] ; account_invoices.current_book_list = []"
                                ng-search="_search.$order_invoices_type_search" class="col2" label="##word.order_type##"
                                ng-model="account_invoices.order_invoices_type" items="transactionTypeList"
                                display="##session.lang##">
                            </i-list>

                            <i-control ng-keydown="loadOrderInvoicesType($event)" id="item_name" class="col3"
                                ng-model="search_order" label="##word.search##" type="text"></i-control>
                        </div>

                        <div class="row" ng-show="orderInvoicesTypeList.length > 0">

                            <table x-permissions="login" class="table bold hover loaded" id="t1">
                                <tr>
                                    <th> ##word.code## </th>
                                    <th
                                        ng-show="account_invoices.source_type.id == 2 ||account_invoices.source_type.id == 3 || account_invoices.source_type.id == 4">
                                        ##word.customer## </th>
                                    <th ng-show="account_invoices.source_type.id == 1"> ##word.vendor## </th>

                                    <th ng-show="account_invoices.source_type.id == 4">##word.trainer## </th>
                                    <th ng-show="account_invoices.source_type.id == 5">##word.tenants## </th>
                                    <th
                                        ng-show="account_invoices.source_type.id == 4 || account_invoices.source_type.id == 5">
                                        ##word.halls## </th>
                                    <th ng-show="account_invoices.source_type.id == 4"> ##word.services## </th>

                                    <th ng-show=" account_invoices.order_invoices_type.id==2">
                                        ##word.delivery_employee##
                                    </th>
                                    <th ng-show="account_invoices.order_invoices_type.id ==1"> ##word.tables_group##
                                    </th>
                                    <th ng-show="account_invoices.order_invoices_type.id ==1"> ##word.table## </th>
                                    <th> ##word.transaction_type## </th>
                                </tr>


                                <tr class="pointer" ng-repeat="item in orderInvoicesTypeList"
                                    ng-click="selectOrderInvoices(item)">
                                    <td class="center blue"> {{item.code || item.number}} </td>
                                    <td class="center"
                                        ng-show="account_invoices.source_type.id == 2 ||account_invoices.source_type.id == 3 || account_invoices.source_type.id == 4">
                                        {{item.customer.name_##session.lang##}} <b ng-show="!item.customer.name_##session.lang##">
                                            ##word.not_found##</b> </td>

                                    <td class="center" ng-show="account_invoices.source_type.id == 1">
                                        {{item.vendor.name_##session.lang##}} <b ng-show="!item.vendor.name_##session.lang##">
                                            ##word.not_found##</b> </td>

                                    <td class="center" ng-show="account_invoices.source_type.id == 4">
                                        {{item.trainer.name}} <b ng-show="!item.trainer.name">
                                            ##word.not_found##</b> </td>

                                    <td class="center" ng-show="account_invoices.source_type.id == 5">
                                        {{item.tenant.name}} <b ng-show="!item.tenant.name">
                                            ##word.not_found##</b> </td>


                                    <td class="center"
                                        ng-show="account_invoices.source_type.id == 5 || account_invoices.source_type.id == 4">
                                        {{item.hall.name}} <b ng-show="!item.hall.name">
                                            ##word.not_found##</b> </td>

                                    <td class="center" ng-show="account_invoices.source_type.id == 4">
                                        {{item.service_name}} </td>

                                    <td ng-show="account_invoices.order_invoices_type.id ==2" class="center">
                                        {{item.delivery_employee.name}}</td>
                                    <td ng-show="account_invoices.order_invoices_type.id ==1" class="center">
                                        {{item.table.tables_group.name}} </td>
                                    <td ng-show="account_invoices.order_invoices_type.id ==1" class="center">
                                        {{item.table.name}}</td>
                                    <td class="center">
                                        {{item.transaction_type.##session.lang## ||item.type.##session.lang##}} <b
                                            ng-show="!item.transaction_type.##session.lang## && !item.type.##session.lang##">
                                            ##word.not_found##</b></td>
                                </tr>
                            </table>
                        </div>











                        <div class="row" ng-show="account_invoices.current_book_list.length > 0">

                            <table x-permissions="login" class="table bold hover loaded" id="t1">

                                <tr>
                                    <th>##word.stores_items_name##</th>
                                    <th>##word.items_count##</th>
                                    <th>##word.items_price##</th>
                                    <th>##word.discount##</th>
                                    <th>##word.items_price_total##</th>
                                    <th class="not-print" ng-show="account_invoices.source_type.id == 3">
                                        ##word.actions##
                                    </th>
                                </tr>

                                <tr ng-repeat="c in account_invoices.current_book_list">
                                    <td class="center title">
                                        <p>{{c.size}}</p>
                                        <p>{{c.size_en}}</p>
                                    </td>
                                    <td class="center blue">{{c.count}}</td>
                                    <td class="center">
                                        <p ng-hide="account_invoices.source_type.id ==1">{{c.price}}</p>
                                        <p ng-show="account_invoices.source_type.id ==1">{{c.cost}}</p>
                                    </td>
                                    <td class="center red">{{c.discount.value}}
                                        <b class="red" ng-show="c.discount.type =='number'">$</b>
                                        <b class="red" ng-show="c.discount.type =='percent'">%</b>
                                    </td>
                                    <td class="center green">{{c.total}}</td>
                                    <td class="center not-print" ng-show="account_invoices.source_type.id == 3">
                                        <i-button type="delete" label="##word.delete##"
                                            ng-click="deleteItemsList(c) ; calc(account_invoices)">
                                        </i-button>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <br>
                        <br>







                        <div class="row" ng-show="account_invoices.invoice_id">
                            <div class="col6">

                                <table id="basicInformationTable" class="table hover bold">

                                    <tr ng-show="account_invoices.date">
                                        <td class="title">##word.date##</td>
                                        <td class="center brown">
                                            {{account_invoices.date | date : 'yyyy - MM - dd'}}
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="title">##word.code##</td>
                                        <td class="center blue">{{account_invoices.invoice_code}}</td>
                                    </tr>

                                    <tr ng-show="account_invoices.customer.name_##session.lang##">
                                        <td class="title">##word.customer##</td>
                                        <td class="center">{{account_invoices.customer.name_##session.lang##}}</td>
                                    </tr>

                                    <tr ng-show="account_invoices.vendor.name_##session.lang##">
                                        <td class="title">##word.vendor##</td>
                                        <td class="center">{{account_invoices.vendor.name_##session.lang##}}</td>
                                    </tr>

                                    <tr ng-show="account_invoices.trainer.id">
                                        <td class="title">##word.trainer##</td>
                                        <td class="center">{{account_invoices.trainer.name}}</td>
                                    </tr>

                                    <tr ng-show="account_invoices.tenant.id">
                                        <td class="title">##word.tenant##</td>
                                        <td class="center">{{account_invoices.tenant.name}}</td>
                                    </tr>

                                    <tr ng-show="account_invoices.service > 0">
                                        <td class="title"> ##word.service## </td>
                                        <td class="center"> {{account_invoices.service}} </td>
                                    </tr>

                                    <tr ng-show="account_invoices.total_period > 0">
                                        <td class="title"> ##word.total_period## </td>
                                        <td class="center"> {{account_invoices.total_period}} </td>
                                    </tr>

                                    <tr ng-show="account_invoices.period > 0">
                                        <td class="title"> ##word.period## </td>
                                        <td class="center"> {{account_invoices.period.##session.lang##}} </td>
                                    </tr>

                                    <tr ng-show="account_invoices.price_hour > 0">
                                        <td class="title"> ##word.price_hour## </td>
                                        <td class="center"> {{account_invoices.price_hour}} </td>
                                    </tr>

                                    <tr ng-show="account_invoices.price_day > 0">
                                        <td class="title"> ##word.price_day## </td>
                                        <td class="center"> {{account_invoices.price_day}} </td>
                                    </tr>


                                    <tr ng-show="account_invoices.price_delivery_service > 0">
                                        <td class="title"> ##word.price_delivery_service## </td>
                                        <td class="center"> {{account_invoices.price_delivery_service}} </td>
                                    </tr>

                                    <tr ng-show="account_invoices.services_price">
                                        <td class="title">##word.services_price##</td>
                                        <td class="center">{{account_invoices.services_price}}</td>
                                    </tr>

                                    <tr ng-show="account_invoices.table.id">
                                        <td class="title">##word.tables_group##</td>
                                        <td class="center">{{account_invoices.table.tables_group.name}}</td>
                                    </tr>

                                    <tr ng-show="account_invoices.table.id">
                                        <td class="title">##word.table##</td>
                                        <td class="center">{{account_invoices.table.name}}</td>
                                    </tr>

                                    <tr ng-show="account_invoices.hall.id">
                                        <td class="title">##word.hall##</td>
                                        <td class="center">{{account_invoices.hall.name}}</td>
                                    </tr>

                                    <tr ng-show="account_invoices.service_name">
                                        <td class="title">##word.service##</td>
                                        <td class="center">{{account_invoices.service_name}}</td>
                                    </tr>

                                    <tr ng-show="account_invoices.date_from">
                                        <td class="title">##word.date_from_subscribe##</td>
                                        <td class="center green">
                                            {{account_invoices.date_from | date : 'yyyy - MM - dd'}}
                                        </td>
                                    </tr>
                                    <tr ng-show="account_invoices.date_to">
                                        <td class="title">##word.expired_date##</td>
                                        <td class="center red">{{account_invoices.date_to | date : 'yyyy - MM - dd'}}
                                        </td>
                                    </tr>

                                </table>
                            </div>

                        </div>

                        <br>
                        <br>

                        <div class="row">

                            <i-control ng-show="account_invoices.total_tax" ng-model="account_invoices.total_tax"
                                ng-disabled="account_invoices.source_type.id == 1 || account_invoices.source_type.id == 2"
                                ng-change="calc(account_invoices)" label="##word.stores_out_total_tax##" class="col3"
                                type="number">
                            </i-control>
                            <i-control ng-show="account_invoices.total_discount" ng-change="calc(account_invoices)"
                                ng-disabled="account_invoices.source_type.id == 1 || account_invoices.source_type.id == 2 || account_invoices.source_type.id == 4"
                                ng-model="account_invoices.total_discount" label="##word.stores_out_total_discount##"
                                class="col3" type="number"></i-control>
                            <i-control ng-show="account_invoices.price_delivery_service"
                                ng-change="calc(account_invoices)" ng-model="account_invoices.price_delivery_service"
                                label="##word.price_delivery_service##" class="col3" type="number"></i-control>
                            <i-control class="col3" ng-show="account_invoices.service"
                                ng-change="calc(account_invoices)" ng-model="account_invoices.service"
                                label="##word.service##" type="number"></i-control>
                            <div class="col2"></div>

                        </div>

                        <div class="row" ng-show="account_invoices.invoice_id">
                            <i-list help-id="" ng-search="_search.$payment_method_search" class="col2"
                                label="##word.payment_method##" ng-model="account_invoices.payment_method"
                                items="paymentMethodList" ng-change="getSafeByType(account_invoices)"
                                display="##session.lang##">
                            </i-list>

                            <i-list class="col3 control padding" ng-search="_search.$currency_search"
                                ng-model="account_invoices.currency"
                                ng-change="getSafeByType(account_invoices) ; calc(account_invoices)"
                                items="currenciesList" label="##word.currency##"></i-list>

                            <i-control class="col2" disabled ng-model="account_invoices.currency.ex_rate" type="number"
                                label="##word.exchange_rate##"></i-control>

                            <i-list v="r" class="col3 control padding" ng-search="_search.$safe_account_invoices"
                                ng-model="account_invoices.safe" items="safesList" label="##word.amounts_in_safe##">
                            </i-list>

                        </div>

                        <div class="row" ng-show="account_invoices.invoice_id">
                            <i-control class="col2" disabled ng-show="account_invoices.net_value"
                                ng-model="account_invoices.net_value" label="##word.net_value##" type="number">
                            </i-control>
                            <i-control class="col2" disabled ng-model="amount_currency" label="##word.amount_currency##"
                                type="number">
                            </i-control>

                            <i-control class="col2" ng-show="account_invoices.net_value"
                                ng-model="account_invoices.paid_up" label="##word.paid_up##" type="number">
                            </i-control>
                        </div>

                    </div>
                </div>

                <div class="col3">
                    <i-image category="account_invoices" ng-model="account_invoices.image_url"> </i-image>
                </div>
            </div>
        </fieldset>
    </div>
</div>